import React from 'react';
import { LucideIcon, UserPlus, DollarSign, Clock, CheckCircle } from 'lucide-react';
import { ReferralStats } from '@/lib/mockData/referrals';
import { formatEther } from '@/lib/utils';

interface StatCardProps {
  title: string;
  value: bigint | number;
  icon: LucideIcon;
  token?: string;
  colorClass: string;
  isCount?: boolean;
}

const StatCard: React.FC<StatCardProps> = ({ title, value, icon: Icon, token, colorClass, isCount = false }) => {
  
  const displayValue = isCount 
    ? (value as number).toLocaleString() 
    : formatEther(value as bigint);

  return (
    <div className="flex flex-col p-6 bg-white rounded-xl shadow-lg border border-gray-100 transition-shadow duration-300 hover:shadow-xl">
      <div className="flex items-center justify-between">
        <h3 className="text-sm font-medium text-gray-500">{title}</h3>
        <div className={`p-2 rounded-full ${colorClass} bg-opacity-10`}>
          <Icon className={`w-5 h-5 ${colorClass}`} />
        </div>
      </div>
      <div className="mt-4">
        <p className={`text-3xl font-bold text-gray-900`}>
          {displayValue}
        </p>
        {token && <p className="text-sm font-semibold text-teal-600 mt-1">{token}</p>}
      </div>
    </div>
  );
};

interface ReferralStatsProps {
    stats: ReferralStats;
}

export const ReferralStatsCards: React.FC<ReferralStatsProps> = ({ stats }) => {
    return (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <StatCard
                title="Total Referrals"
                value={stats.totalReferrals}
                icon={UserPlus}
                colorClass="text-purple-600"
                isCount={true}
            />
            <StatCard
                title="Total Earned (Lifetime)"
                value={stats.totalEarnings}
                icon={DollarSign}
                token="WETH/ETH"
                colorClass="text-teal-600"
            />
            <StatCard
                title="Pending Earnings"
                value={stats.pendingEarnings}
                icon={Clock}
                token="WETH/ETH"
                colorClass="text-yellow-600"
            />
            <StatCard
                title="Paid Earnings"
                value={stats.paidEarnings}
                icon={CheckCircle}
                token="WETH/ETH"
                colorClass="text-green-600"
            />
        </div>
    );
}